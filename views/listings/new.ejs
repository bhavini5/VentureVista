<%layout("/layouts/boilerplate") %>
<body>
    <div class="row">
        <div class="col-8 offset-2">
            <br><br>
            <h3>Create a new listing</h3>
    <form method="POST" action="/listings/upload" novalidate class="needs-validation" enctype="multipart/form-data">
        <div class="mb-3">
            <lable for="title"class="form-label">Title</lable>
            <input name="listing[title]" placeholder="Add a catchy title" type="text" class="form-control" required>
            <div class="invalid-feedback">Please fill the required filled</div>
        </div>

        <div class="mb-3">
            <lable for="description"class="form-label">Description</lable>
            <textarea name="listing[description]" placeholder="enter description" type="text" class="form-control" required></textarea>
            <div class="invalid-feedback">Please fill the required filled</div>
        </div>

        <div class="mb-3">
            <lable for="image" class="form-label">Upload Listing Image</lable>
            <input type="file" name="listing[image]" class="form-control" multiple>
            <!-- <input name="listing[image]" type="file" class="form-control" > -->
        </div>
        

        <div class="row">
            <div class="mb-3 col-md-4">
                <lable for="price"class="form-label">Price</lable>
            <input name="listing[price]" placeholder="1200" type="number" class="form-control" required>
            <div class="invalid-feedback">Please fill the required filled</div>

            </div>
            <div class="mb-3 col-md-4">
                <lable for="location"class="form-label">Location</lable>
                <input name="listing[location]" placeholder="Jaipur,Rajasthan" type="text" class="form-control" required>
                <div class="invalid-feedback">Please fill the required filled</div>
    
            </div>
            <div class="mb-3 col-md-4">
                <lable for="location"class="form-label">Country</lable>
                <input name="listing[country]" placeholder="India" type="text" class="form-control" required>
                <div class="invalid-feedback">Please fill the required filled</div>
    
            </div>
    
            <div class="mb-3">
                <label for="contact" class="form-label">Phone Number</label>
                <input name="listing[contact]" type="text" class="form-control" id="contact" placeholder="Enter phone number (e.g., +1234567890)" required>
                <div class="invalid-feedback" id="phoneErrorMessage">Please enter a valid phone number</div>
            </div>
            
            
        </div>
        
        <div class="mb-3 ">
            <lable for="country"class="form-label">Address</lable>
            <input name="listing[address]" placeholder="# 54-B Vasant Vihar, New Delhi" type="text" class="form-control" required>
        <div class="invalid-feedback">Please fill the required filled</div>
        </div>
        <div class="row">
            <div class="mb-3 col-md-4">
                <label for="category" class="form-label">Category</label><br>
                <select name="listing[category]" class="form-control">
                    <option value="Sell">Sell</option>
                    <option value="Rental">Rental</option>
                </select>
                <div class="invalid-feedback">Please select a category.</div>
            </div>
            
            <div class="mb-3 col-md-4">
                <label for="type" class="form-label">Type</label><br>
                <select name="listing[type]" class="form-control">
                    <option value="House">House</option>
                    <option value="Villa">Villa</option>
                    <option value="Flat">Flat</option>
                    <option value="Shop">Shop</option>
                </select>
                <div class="invalid-feedback">Please select a type.</div>
            </div>
          <div class="invalid-feedback">Please fill the required filled</div>
          </select>
          
        </div>
        </div></div>

        <!-- <div class="dropdown">
            <lable for="category"class="form-label">Category</lable><br>
            <div class="invalid-feedback">Please fill the required filled</div>
        <input type="hidden" name="listing[category]" id="selectedCategory">

            <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                Select a category
            </button>
            <ul class="dropdown-menu " aria-labelledby="dropdownMenuButton1">
                <li><a class="dropdown-item"  value="" >Mountain Majesty</a></li>
                <li><a class="dropdown-item"  value="             >Farms</a></li>
                <li><a class="dropdown-item"  value="" >Riverside Retreat</a></li>
                <li><a class="dropdown-item"  value="" >Historic Elegance</a></li>
                <li><a class="dropdown-item"  value=""     >Forest Lodges</a></li>
                <li><a class="dropdown-item"  value=""      >Desert Oasis</a></li>
            </ul>
        </div> -->
        <br>
        <button style="margin-left: 14rem;" class="btn btn-dark add-btn">Add</button>
        
        <br><br>
    </form>
        </div>

    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
       $(document).ready(function () {
    $('.dropdown-item').click(function () {
        var selectedCategory = $(this).data('value');
        $('#selectedCategory').val(selectedCategory);
        $('#dropdownMenuButton1').text(selectedCategory);
    });
});

$(document).ready(function() {
    $('#contact').on('input', function() {
        var phoneNumber = $(this).val();
        var isValidPhoneNumber = /^\+?\d{10,14}$/.test(phoneNumber); // Adjust regex pattern as needed

        if (isValidPhoneNumber) {
            $(this).removeClass('is-invalid');
            $('#phoneErrorMessage').hide();
        } else {
            $(this).addClass('is-invalid');
            $('#phoneErrorMessage').show();
        }
    });
});
// Example client-side form validation using plain JavaScript
document.querySelector('form').addEventListener('submit', function(event) {
    const categorySelect = document.querySelector('select[name="category"]');
    const selectedCategory = categorySelect.value;

    if (!selectedCategory) {
        event.preventDefault(); // Prevent form submission
        categorySelect.classList.add('is-invalid'); // Display validation error
        return;
    }

    // Clear validation error if category is selected
    categorySelect.classList.remove('is-invalid');
});

    </script>
</body>
